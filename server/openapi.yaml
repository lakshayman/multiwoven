openapi: 3.0.3
info:
  title: Multiwoven Server API
  description: API for the Multiwoven server (Rails). All endpoints under /api/v1 require Bearer token authentication and Workspace-Id header except auth endpoints.
  version: 1.0.0

servers:
  - url: /api/v1
    description: API v1 base path

tags:
  - name: Auth
    description: Authentication (no Bearer token required)
  - name: Workspaces
  - name: Connectors
  - name: Catalogs
  - name: Models
  - name: Syncs
  - name: Sync Runs
  - name: Sync Records
  - name: Connector Definitions
  - name: Users
  - name: Reports
  - name: Schedule Syncs

paths:
  /up:
    get:
      tags: [Health]
      summary: Health check
      operationId: healthCheck
      responses:
        "200":
          description: OK

  /signup:
    post:
      tags: [Auth]
      summary: Sign up
      operationId: signup
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, email, password, password_confirmation, company_name]
              properties:
                name: { type: string }
                email: { type: string, format: email }
                password: { type: string }
                password_confirmation: { type: string }
                company_name: { type: string }
      responses:
        "201":
          description: Created (user object)
        "422":
          description: Unprocessable (validation errors)

  /verify_user:
    get:
      tags: [Auth]
      summary: Verify user (email confirmation)
      operationId: verifyUser
      parameters:
        - name: confirmation_token
          in: query
          required: true
          schema: { type: string }
      responses:
        "200":
          description: Account verified
        "422":
          description: Invalid confirmation code

  /login:
    post:
      tags: [Auth]
      summary: Login
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email: { type: string, format: email }
                password: { type: string }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      type: { type: string, example: "token" }
                      id: { type: string }
                      attributes:
                        type: object
                        properties:
                          token: { type: string }
        "401":
          description: Unauthorized

  /logout:
    delete:
      tags: [Auth]
      summary: Logout
      operationId: logout
      security:
        - BearerAuth: []
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized

  /forgot_password:
    post:
      tags: [Auth]
      summary: Forgot password
      operationId: forgotPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email]
              properties:
                email: { type: string, format: email }
      responses:
        "200":
          description: Reset instructions sent
        "404":
          description: Email not found

  /reset_password:
    post:
      tags: [Auth]
      summary: Reset password
      operationId: resetPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [reset_password_token, password, password_confirmation]
              properties:
                reset_password_token: { type: string }
                password: { type: string }
                password_confirmation: { type: string }
      responses:
        "200":
          description: Password reset
        "422":
          description: Invalid token or validation error

  /resend_verification:
    post:
      tags: [Auth]
      summary: Resend verification email
      operationId: resendVerification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email]
              properties:
                email: { type: string, format: email }
      responses:
        "200":
          description: Verification link sent
        "422":
          description: Unprocessable

  /workspaces:
    get:
      tags: [Workspaces]
      summary: List workspaces
      operationId: listWorkspaces
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
      responses:
        "200":
          description: OK (array of workspaces)
        "401":
          description: Unauthorized
    post:
      tags: [Workspaces]
      summary: Create workspace
      operationId: createWorkspace
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [workspace]
              properties:
                workspace:
                  type: object
                  required: [name, organization_id]
                  properties:
                    name: { type: string }
                    organization_id: { type: integer }
                    description: { type: string, nullable: true }
                    region: { type: string, nullable: true }
      responses:
        "201":
          description: Created
        "401":
          description: Unauthorized
        "422":
          description: Validation failed

  /workspaces/{id}:
    get:
      tags: [Workspaces]
      summary: Get workspace
      operationId: getWorkspace
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found
    patch:
      tags: [Workspaces]
      summary: Update workspace
      operationId: updateWorkspace
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [workspace]
              properties:
                workspace:
                  type: object
                  properties:
                    name: { type: string }
                    organization_id: { type: integer }
                    region: { type: string }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found
        "422":
          description: Validation failed
    delete:
      tags: [Workspaces]
      summary: Delete workspace
      operationId: deleteWorkspace
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        "204":
          description: No content
        "401":
          description: Unauthorized
        "422":
          description: Delete failed

  /connectors:
    get:
      tags: [Connectors]
      summary: List connectors
      operationId: listConnectors
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: type
          in: query
          schema: { type: string, enum: [source, destination] }
        - name: category
          in: query
          schema: { type: string }
        - name: sub_category
          in: query
          schema: { type: string }
        - name: page
          in: query
          schema: { type: integer }
        - name: per_page
          in: query
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
    post:
      tags: [Connectors]
      summary: Create connector
      operationId: createConnector
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [connector]
              properties:
                connector:
                  type: object
                  required: [name, connector_name, connector_type, configuration]
                  properties:
                    name: { type: string }
                    connector_name: { type: string }
                    connector_type: { type: string, enum: [source, destination] }
                    configuration: { type: object }
                    description: { type: string }
                    query_type: { type: string }
      responses:
        "201":
          description: Created
        "401":
          description: Unauthorized
        "422":
          description: Validation failed

  /connectors/{id}:
    get:
      tags: [Connectors]
      summary: Get connector
      operationId: getConnector
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found
    patch:
      tags: [Connectors]
      summary: Update connector
      operationId: updateConnector
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [connector]
              properties:
                connector:
                  type: object
                  properties:
                    name: { type: string }
                    connector_name: { type: string }
                    connector_type: { type: string }
                    configuration: { type: object }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found
        "422":
          description: Validation failed
    delete:
      tags: [Connectors]
      summary: Delete connector
      operationId: deleteConnector
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        "204":
          description: No content
        "401":
          description: Unauthorized
        "404":
          description: Not found

  /connectors/{id}/discover:
    get:
      tags: [Connectors]
      summary: Discover connector catalog
      operationId: discoverConnector
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
        - name: refresh
          in: query
          schema: { type: boolean }
      responses:
        "200":
          description: OK (catalog)
        "401":
          description: Unauthorized
        "404":
          description: Not found
        "422":
          description: Discover failed

  /connectors/{id}/query_source:
    post:
      tags: [Connectors]
      summary: Query source connector
      operationId: querySource
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [query]
              properties:
                query: { type: string }
                limit: { type: integer, default: 50 }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data: { type: array, items: { type: object } }
        "401":
          description: Unauthorized
        "404":
          description: Not found
        "422":
          description: Connector not a source or query failed

  /connectors/{id}/execute_model:
    post:
      tags: [Connectors]
      summary: Execute model on source connector
      operationId: executeModel
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [payload]
              properties:
                payload: { type: string, description: "JSON string" }
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data: { type: array, items: { type: object } }
        "401":
          description: Unauthorized
        "404":
          description: Not found
        "422":
          description: Connector not a source or execution failed

  /catalogs:
    post:
      tags: [Catalogs]
      summary: Create catalog
      operationId: createCatalog
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [connector_id, catalog]
              properties:
                connector_id: { type: integer }
                catalog:
                  type: object
                  required: [json_schema]
                  properties:
                    json_schema: { type: object }
      responses:
        "201":
          description: Created
        "401":
          description: Unauthorized
        "404":
          description: Connector not found
        "422":
          description: Validation failed

  /catalogs/{id}:
    patch:
      tags: [Catalogs]
      summary: Update catalog
      operationId: updateCatalog
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [connector_id, catalog]
              properties:
                connector_id: { type: integer }
                catalog:
                  type: object
                  required: [json_schema]
                  properties:
                    json_schema: { type: object }
      responses:
        "201":
          description: Created (catalog)
        "401":
          description: Unauthorized
        "404":
          description: Not found
        "422":
          description: Validation failed

  /models:
    get:
      tags: [Models]
      summary: List models
      operationId: listModels
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: query_type
          in: query
          schema: { type: string, description: "Comma-separated query types" }
        - name: page
          in: query
          schema: { type: integer }
        - name: per_page
          in: query
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
    post:
      tags: [Models]
      summary: Create model
      operationId: createModel
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [model]
              properties:
                model:
                  type: object
                  required: [connector_id, name, query_type]
                  properties:
                    connector_id: { type: integer }
                    name: { type: string }
                    description: { type: string }
                    query: { type: string }
                    query_type: { type: string }
                    primary_key: { type: string }
                    configuration: { type: object }
      responses:
        "201":
          description: Created
        "401":
          description: Unauthorized
        "422":
          description: Validation failed

  /models/{id}:
    get:
      tags: [Models]
      summary: Get model
      operationId: getModel
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found
    patch:
      tags: [Models]
      summary: Update model
      operationId: updateModel
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [model]
              properties:
                model:
                  type: object
                  properties:
                    connector_id: { type: integer }
                    name: { type: string }
                    description: { type: string }
                    query: { type: string }
                    query_type: { type: string }
                    primary_key: { type: string }
                    configuration: { type: object }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found
        "422":
          description: Validation failed
    delete:
      tags: [Models]
      summary: Delete model
      operationId: deleteModel
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        "204":
          description: No content
        "401":
          description: Unauthorized
        "404":
          description: Not found

  /syncs:
    get:
      tags: [Syncs]
      summary: List syncs
      operationId: listSyncs
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: page
          in: query
          schema: { type: integer }
        - name: per_page
          in: query
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
    post:
      tags: [Syncs]
      summary: Create sync
      operationId: createSync
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [sync]
              properties:
                sync:
                  type: object
                  required: [model_id, destination_id, schedule_type, sync_mode, stream_name, configuration]
                  properties:
                    source_id: { type: integer }
                    model_id: { type: integer }
                    destination_id: { type: integer }
                    schedule_type: { type: string, enum: [manual, interval, cron_expression] }
                    sync_interval: { type: integer }
                    sync_interval_unit: { type: string, enum: [minutes, hours, days, weeks] }
                    cron_expression: { type: string }
                    sync_mode: { type: string, enum: [full_refresh, incremental] }
                    stream_name: { type: string }
                    cursor_field: { type: string }
                    name: { type: string }
                    configuration: {}
      responses:
        "201":
          description: Created
        "401":
          description: Unauthorized
        "422":
          description: Validation failed

  /syncs/configurations:
    get:
      tags: [Syncs]
      summary: Get sync configurations
      operationId: getSyncConfigurations
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "422":
          description: Unable to fetch

  /syncs/{id}:
    get:
      tags: [Syncs]
      summary: Get sync
      operationId: getSync
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found
    patch:
      tags: [Syncs]
      summary: Update sync
      operationId: updateSync
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required: [sync]
              properties:
                sync:
                  type: object
                  properties:
                    source_id: { type: integer }
                    model_id: { type: integer }
                    destination_id: { type: integer }
                    schedule_type: { type: string }
                    sync_interval: { type: integer }
                    sync_interval_unit: { type: string }
                    cron_expression: { type: string }
                    sync_mode: { type: string }
                    stream_name: { type: string }
                    configuration: {}
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found
        "422":
          description: Validation failed
    delete:
      tags: [Syncs]
      summary: Delete (soft) sync
      operationId: deleteSync
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        "204":
          description: No content
        "401":
          description: Unauthorized
        "404":
          description: Not found

  /syncs/{id}/enable:
    patch:
      tags: [Syncs]
      summary: Enable or disable sync
      operationId: enableSync
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: integer }
        - name: enable
          in: query
          required: true
          schema: { type: boolean }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found
        "422":
          description: Sync update failed

  /syncs/{sync_id}/sync_runs:
    get:
      tags: [Sync Runs]
      summary: List sync runs
      operationId: listSyncRuns
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: sync_id
          in: path
          required: true
          schema: { type: integer }
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, started, querying, queued, in_progress, success, paused, failed, canceled]
        - name: page
          in: query
          schema: { type: integer }
        - name: per_page
          in: query
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Sync not found

  /syncs/{sync_id}/sync_runs/{id}:
    get:
      tags: [Sync Runs]
      summary: Get sync run
      operationId: getSyncRun
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: sync_id
          in: path
          required: true
          schema: { type: integer }
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found

  /syncs/{sync_id}/sync_runs/{sync_run_id}/sync_records:
    get:
      tags: [Sync Records]
      summary: List sync records
      operationId: listSyncRecords
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: sync_id
          in: path
          required: true
          schema: { type: integer }
        - name: sync_run_id
          in: path
          required: true
          schema: { type: integer }
        - name: status
          in: query
          schema: { type: string, enum: [pending, success, failed] }
        - name: page
          in: query
          schema: { type: integer }
        - name: per_page
          in: query
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "404":
          description: Not found

  /connector_definitions:
    get:
      tags: [Connector Definitions]
      summary: List connector definitions
      operationId: listConnectorDefinitions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: type
          in: query
          schema: { type: string, enum: [source, destination] }
        - name: category
          in: query
          schema: { type: string }
        - name: page
          in: query
          schema: { type: integer }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
  /connector_definitions/{id}:
    get:
      tags: [Connector Definitions]
      summary: Get connector definition by name
      operationId: getConnectorDefinition
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: id
          in: path
          required: true
          schema: { type: string, description: "Connector name (e.g. snowflake)" }
        - name: type
          in: query
          required: true
          schema: { type: string, enum: [source, destination] }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
  /connector_definitions/check_connection:
    post:
      tags: [Connector Definitions]
      summary: Check connection for a connector definition
      operationId: checkConnection
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, type, connection_spec]
              properties:
                name: { type: string }
                type: { type: string, enum: [source, destination] }
                connection_spec: { type: object }
      responses:
        "200":
          description: OK (connection status)
        "401":
          description: Unauthorized
        "422":
          description: Invalid connector name/type

  /users/me:
    get:
      tags: [Users]
      summary: Get current user (in current workspace context)
      operationId: getCurrentUser
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
      responses:
        "200":
          description: OK (user with role for workspace)
        "401":
          description: Unauthorized

  /reports:
    get:
      tags: [Reports]
      summary: Get report (e.g. workspace activity)
      operationId: getReports
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: type
          in: query
          required: true
          schema: { type: string, example: "workspace_activity" }
        - name: metric
          in: query
          schema: { type: string, enum: [sync_run_triggered, total_sync_run_rows, all] }
        - name: time_period
          in: query
          schema: { type: string, enum: [one_week, one_day] }
        - name: connector_ids
          in: query
          schema: { type: array, items: { type: integer } }
      responses:
        "200":
          description: OK (workspace activity or other report data)
        "401":
          description: Unauthorized
        "422":
          description: Invalid type/params

  /reports/workspace_activity:
    get:
      tags: [Reports]
      summary: Workspace activity report (collection route)
      operationId: getReportsWorkspaceActivity
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: type
          in: query
          schema: { type: string }
        - name: metric
          in: query
          schema: { type: string }
        - name: time_period
          in: query
          schema: { type: string }
        - name: connector_ids
          in: query
          schema: { type: array, items: { type: integer } }
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized

  /schedule_syncs:
    post:
      tags: [Schedule Syncs]
      summary: Schedule a sync (manual schedule type only)
      operationId: scheduleSync
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [schedule_sync]
              properties:
                schedule_sync:
                  type: object
                  required: [sync_id]
                  properties:
                    sync_id: { type: integer }
      responses:
        "200":
          description: Sync scheduled
        "401":
          description: Unauthorized
        "404":
          description: Sync not found
        "424":
          description: Sync is disabled / schedule type must be manual

  /schedule_syncs/{sync_id}:
    delete:
      tags: [Schedule Syncs]
      summary: Cancel scheduled sync
      operationId: cancelScheduleSync
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/WorkspaceIdHeader'
        - name: sync_id
          in: path
          required: true
          schema: { type: integer }
      responses:
        "200":
          description: Sync cancelled
        "401":
          description: Unauthorized
        "404":
          description: Sync not found
        "424":
          description: Failed dependency

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "JWT token from login; use header Authorization Bearer token"

  parameters:
    WorkspaceIdHeader:
      name: Workspace-Id
      in: header
      required: true
      description: Workspace context (required for all /api/v1 endpoints except auth)
      schema:
        type: string

  schemas:
    Error:
      type: object
      properties:
        errors:
          type: array
          items:
            type: object
            properties:
              status: { type: integer }
              title: { type: string }
              detail: { type: string }
              source:
                type: object
